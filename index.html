<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Turned in person List</title>
<script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore.js"></script>
<style>
  .highlight {
    background-color: yellow;
    transition: background-color 0.5s ease;
    padding: 5px;
    display: inline-block;
    border-radius: 5px;
    margin-bottom: 10px;
  }
</style>
</head>
<body>

<h1>Persons</h1>
<ul id="person-list">
  <!-- person items will appear here -->
</ul>

<script>
  // Your firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyAwzp3h8tt_tcDF1um--LoroAu1rErMmBc",
    authDomain: "virac-tsv.firebaseapp.com",
    projectId: "virac-tsv",
    storageBucket: "virac-tsv.firebasestorage.app",
    messagingSenderId: "455316064834",
    appId: "1:455316064834:web:1dc1033265b58a6c82bbdb"
  };
  
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  const personList = document.getElementById('person-list');

  // Real-time update from Firestore
  db.collection('person').orderBy('name').onSnapshot((snapshot) => {
    personList.innerHTML = '';
    snapshot.forEach((doc) => {
      const person = doc.data();

      const li = document.createElement('li');
      const span = document.createElement('span');
      span.textContent = person.name;
      if (person.turnedIn) {
        span.classList.add('highlight'); 
      }
      const button = document.createElement('button');
      button.textContent = person.turnedIn ? "Remove Highlight" : "Mark as Turned In";
      button.onclick = () => {
        db.collection('person').doc(doc.id).update({ turnedIn: !person.turnedIn });
      };
      li.prepend(button);
      li.prepend(span);
      personList.prepend(li);
    });
  });
</script>

</body>
</html>
